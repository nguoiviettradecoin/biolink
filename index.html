<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="color-scheme" content="dark">
  <title>Trading Insight | Con R·ªìng Ch√°u Ti√™n</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Mulish:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-deep:#050505;
      --gold-imperial:#c5a059;
      --gold-bright:#fceabb;
      --red-luck:#8a1c1c;
      --jade-imperial:#005c4b;
      --glass:rgba(20,20,20,.72);
      --border-gold:rgba(197,160,89,.35);
      --text-white:#f5f5f5;
      --shadow: 0 14px 46px rgba(0,0,0,.55);
      --glow: 0 0 22px rgba(197,160,89,.18);
    }

    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{height:100%;background:var(--bg-deep);color:var(--text-white)}
    body{
      font-family:'Mulish',sans-serif;
      min-height:100dvh;
      overflow:hidden;
      position:relative;
      overscroll-behavior:none;
      -webkit-text-size-adjust:100%;
    }

    /* ======================================================
       PERFORMANCE FLAGS
       - .fx-on: ch·ªâ b·∫≠t hi·ªáu ·ª©ng sau khi b·∫•m "Truy c·∫≠p"
       - .low-power: t·∫Øt hi·ªáu ·ª©ng n·∫∑ng cho m√°y y·∫øu
       ====================================================== */
    html:not(.fx-on) .aura,
    html:not(.fx-on) .beams,
    html:not(.fx-on) .dong-son-bg,
    html:not(.fx-on) .grain { display:none !important; }

    html.low-power .beams,
    html.low-power .grain,
    html.low-power .aura { animation:none !important; filter:none !important; }
    html.low-power .beams{ opacity:.18 !important; }
    html.low-power .dong-son-bg{ opacity:.025 !important; animation:none !important; }
    html.low-power .dragon-halo{ animation:none !important; opacity:.35 !important; }
    html.low-power .ticker-track{ animation-duration: 28s !important; }

    html.low-power .hero-panel,
    html.low-power .dragon-btn,
    html.low-power .market-ticker,
    html.low-power .modal-overlay{
      backdrop-filter:none !important;
      -webkit-backdrop-filter:none !important;
    }

    @media (prefers-reduced-motion: reduce){
      .ticker-track{animation:none !important}
      .dong-son-bg,.drum-ring,.aura,.beams,.dragon-halo,.grain{animation:none !important}
      .fade-in{transition:none !important}
    }

    /* =========================
       BACKGROUND (LIGHTER)
       ========================= */

    .aura{
      position:fixed; inset:-20%;
      background:
        radial-gradient(circle at 20% 30%, rgba(197,160,89,.10), transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(0,92,75,.12), transparent 42%),
        radial-gradient(circle at 55% 45%, rgba(138,28,28,.08), transparent 40%);
      z-index:-6;
      animation: auraMove 16s ease-in-out infinite;
      pointer-events:none;
      filter: blur(6px);
      transform: translateZ(0);
      will-change: transform;
    }

    .beams{
      position:fixed;
      inset:-40%;
      z-index:-5;
      pointer-events:none;
      opacity:.50;
      filter: blur(2px);
      transform: translateZ(0);
      background:
        conic-gradient(from 180deg at 50% 50%,
          transparent 0deg,
          rgba(252,234,187,.10) 25deg,
          transparent 55deg,
          rgba(197,160,89,.08) 85deg,
          transparent 120deg,
          rgba(0,255,170,.06) 160deg,
          transparent 210deg,
          rgba(138,28,28,.06) 255deg,
          transparent 330deg
        );
      mix-blend-mode: screen;
      animation: beamsRotate 34s linear infinite;
      will-change: transform;
    }

    .dong-son-bg{
      position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
      width:min(820px, 92vw);height:min(820px, 92vw);
      opacity:.04;pointer-events:none;z-index:-4;
      background-image:url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4af37' fill-opacity='1'%3E%3Cpath d='M50 0 L52 45 L95 40 L55 52 L95 65 L52 60 L50 100 L48 60 L5 65 L45 52 L5 40 L48 45 Z'/%3E%3C/g%3E%3C/svg%3E");
      mask-image:radial-gradient(circle, rgba(0,0,0,1) 18%, rgba(0,0,0,0) 72%);
      animation:rotateDrum 80s linear infinite;
      filter: drop-shadow(0 0 18px rgba(197,160,89,.10));
      will-change: transform;
    }

    #dragon-canvas{position:fixed;inset:0;z-index:-3;pointer-events:none}

    .grain{
      position:fixed; inset:0;
      z-index:2;
      pointer-events:none;
      opacity:.08;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      background-size:160px 160px;
      mix-blend-mode: overlay;
      animation: grainMove 8s steps(6) infinite;
      transform: translateZ(0);
      will-change: background-position;
    }

    .vignette{
      position:fixed; inset:0;
      z-index:3;
      pointer-events:none;
      background:
        radial-gradient(ellipse at center, transparent 38%, rgba(0,0,0,.55) 100%),
        radial-gradient(circle at 50% 20%, rgba(197,160,89,.10), transparent 55%);
      opacity:.9;
    }

    /* =========================
       TOP TICKER
       ========================= */
    .market-ticker{
      position:fixed;top:0;left:0;width:100%;height:38px;
      background:rgba(138,28,28,.10);
      border-bottom:1px solid var(--border-gold);
      display:flex;align-items:center;overflow:hidden;z-index:100;
      padding-left:env(safe-area-inset-left);
      padding-right:env(safe-area-inset-right);
      transform: translateZ(0);
      contain: paint; /* gi·∫£m repaint */
    }
    @supports ((-webkit-backdrop-filter: blur(7px)) or (backdrop-filter: blur(7px))){
      html.fx-on:not(.low-power) .market-ticker{backdrop-filter: blur(7px); -webkit-backdrop-filter: blur(7px);}
    }

    .ticker-track{
      display:flex;white-space:nowrap;
      animation:marquee 20s linear infinite;
      will-change:transform;
      transform: translate3d(0,0,0);
    }
    .ticker-item{
      padding:0 24px;
      font-size:.75rem;
      font-family:'Cinzel',serif;
      color:var(--gold-imperial);
      display:flex;align-items:center;gap:7px;
      text-shadow: 0 10px 30px rgba(0,0,0,.5);
    }
    .ticker-item strong{font-weight:800}
    .ticker-up{color:#00ff88}
    .ticker-down{color:#ff4d4d}
    .ticker-muted{color:#999}
    .dot{opacity:.55}

    /* =========================
       MAIN LAYOUT
       ========================= */
    .scroll-wrapper{
      position:absolute; inset:0; top:38px;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:46px 18px calc(26px + env(safe-area-inset-bottom));
      z-index:5;
      contain: content; /* gi·∫£m layout/paint lan r·ªông */
    }
    .profile-card{
      width:100%; max-width:480px;
      display:flex; flex-direction:column; align-items:center;
      position:relative;
    }

    .hero-panel{
      width:100%;
      padding:22px 18px 18px;
      border:1px solid rgba(197,160,89,.22);
      border-radius:18px;
      background: linear-gradient(180deg, rgba(20,20,20,.75), rgba(10,10,10,.55));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      margin-bottom:16px;
      transform: translateZ(0);
    }
    @supports ((-webkit-backdrop-filter: blur(12px)) or (backdrop-filter: blur(12px))){
      html.fx-on:not(.low-power) .hero-panel{backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);}
    }
    .hero-panel::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(circle at 30% 20%, rgba(252,234,187,.18), transparent 40%),
        radial-gradient(circle at 70% 80%, rgba(0,255,170,.10), transparent 45%);
      opacity:.8;
      pointer-events:none;
      filter: blur(10px);
    }
    .hero-panel::after{
      content:"";
      position:absolute; inset:0;
      background-image: radial-gradient(circle at center, rgba(197,160,89,.55) 1px, transparent 1px);
      background-size: 9px 9px;
      opacity:.025;
      mask-image: linear-gradient(to right, transparent, black, transparent);
      pointer-events:none;
    }

    .avatar-row{
      display:flex; align-items:center; gap:16px;
      position:relative; z-index:2;
      justify-content:center;
    }
    .avatar-box{position:relative;width:112px;height:112px;flex:0 0 auto}
    .avatar-img{
      width:100%;height:100%;border-radius:50%;object-fit:cover;
      border:2px solid var(--gold-imperial);
      box-shadow: var(--glow);
      position:relative; z-index:2;
      transform: translateZ(0);
    }
    .drum-ring{
      position:absolute; inset:-12px; border-radius:50%;
      border:1px dashed var(--gold-imperial);
      opacity:.42; animation:rotateDrum 20s linear infinite; z-index:1;
      will-change: transform;
    }
    .drum-ring::before{
      content:""; position:absolute; inset:-6px; border-radius:50%;
      border:1px solid var(--gold-imperial); opacity:.16;
    }
    .dragon-halo{
      position:absolute; inset:-24px; border-radius:50%;
      background: radial-gradient(circle, rgba(197,160,89,.14), transparent 60%);
      filter: blur(6px);
      animation: haloPulse 3.0s ease-in-out infinite;
      z-index:0;
      will-change: transform, opacity;
    }

    .name-title{
      font-family:'Cinzel',serif;
      font-size:1.62rem;
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:2px;
      background:linear-gradient(to bottom, #fceabb, #c5a059);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      text-shadow:0 6px 18px rgba(0,0,0,.55);
      margin-top:10px;
      text-align:center;
      position:relative;
      z-index:2;
    }
    .sub-title{
      margin-top:6px;
      font-size:.8rem;
      color:#c8c8c8;
      text-align:center;
      position:relative;
      z-index:2;
      opacity:.9;
    }
    .vietnam-tag{
      margin:12px auto 0;
      width: fit-content;
      font-size:.72rem;
      color:var(--gold-imperial);
      border:1px solid rgba(197,160,89,.28);
      padding:6px 14px;
      border-radius:999px;
      letter-spacing:2px;
      text-transform:uppercase;
      background:rgba(0,0,0,.28);
      display:flex; align-items:center; gap:10px;
      position:relative; z-index:2;
    }

    .section-title{
      width:100%;
      color:#6f6f6f;
      font-size:.72rem;
      margin:14px 0 12px;
      letter-spacing:1.4px;
      text-transform:uppercase;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .section-title::after{
      content:"";
      height:1px; flex:1;
      background: linear-gradient(90deg, rgba(197,160,89,.25), transparent);
      border-radius:999px;
    }

    .dragon-btn{
      width:100%;
      padding:18px 22px;
      margin-bottom:14px;
      position:relative;
      background: linear-gradient(90deg, rgba(255,255,255,.04), rgba(255,255,255,.012));
      border:1px solid rgba(197,160,89,.28);
      border-radius:14px;
      display:flex; align-items:center; justify-content:space-between;
      text-decoration:none; color:#fff; overflow:hidden;
      transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease;
      cursor:pointer;
      box-shadow: 0 9px 26px rgba(0,0,0,.22);
      transform: translateZ(0);
      contain: paint;
    }
    @supports ((-webkit-backdrop-filter: blur(12px)) or (backdrop-filter: blur(12px))){
      html.fx-on:not(.low-power) .dragon-btn{backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);}
    }
    .dragon-btn::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(120deg, transparent 20%, rgba(252,234,187,.10) 35%, transparent 55%);
      transform: translateX(-120%) skewX(-18deg);
      transition: .5s;
      pointer-events:none;
    }
    .dragon-btn:hover{
      border-color: rgba(252,234,187,.70);
      transform: translateY(-2px) translateZ(0);
      box-shadow: 0 14px 44px rgba(0,0,0,.42), 0 0 0 1px rgba(197,160,89,.10) inset;
    }
    .dragon-btn:hover::before{transform: translateX(130%) skewX(-18deg)}
    .dragon-btn:active{transform: translateY(0px) scale(.99) translateZ(0)}
    .btn-content{display:flex; align-items:center; gap:14px; position:relative; z-index:2}
    .btn-icon{
      width:42px;height:42px;border-radius:50%;
      background: rgba(0,0,0,.45);
      display:flex;align-items:center;justify-content:center;
      border:1px solid rgba(255,255,255,.10);
      color: var(--gold-imperial);
      font-size:1.15rem;
      flex:0 0 auto;
      box-shadow: 0 7px 18px rgba(0,0,0,.26);
    }
    .btn-text h3{font-size:.98rem;font-weight:700;margin-bottom:2px}
    .btn-text p{font-size:.72rem;color:#9a9a9a}
    .btn-right{
      display:flex; align-items:center; gap:10px;
      color:#666;
      position:relative; z-index:2;
    }

    .bank-btn{
      border-color: rgba(0,92,75,.65);
      background: linear-gradient(90deg, rgba(0,92,75,.16), rgba(255,255,255,.01));
    }
    .bank-btn .btn-icon{color:#00ffaa;border-color: rgba(0,92,75,.75)}
    .bank-btn:hover{box-shadow: 0 18px 52px rgba(0,92,75,.18), 0 14px 44px rgba(0,0,0,.34)}
    .bank-chip{
      font-size:.72rem;
      color:#9fffe0;
      border:1px solid rgba(0,255,170,.28);
      padding:4px 10px;
      border-radius:999px;
      background: rgba(0,255,170,.06);
    }

    .footer{
      margin-top:26px;
      padding:16px 10px 0;
      text-align:center;
      color:#4b4b4b;
      font-size:.74rem;
      font-family:'Cinzel',serif;
      letter-spacing:1px;
      position:relative;
      opacity:.95;
    }
    .footer .sig{
      display:inline-flex; gap:8px; align-items:center;
      color: rgba(197,160,89,.85);
      margin-top:10px;
      font-size:.72rem;
      border:1px solid rgba(197,160,89,.22);
      padding:6px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.28);
    }

    .modal-overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.86);z-index:1000;
      display:flex;justify-content:center;align-items:center;
      opacity:0;visibility:hidden;transition:.26s;
      padding:20px;
      padding-top:calc(20px + env(safe-area-inset-top));
      padding-bottom:calc(20px + env(safe-area-inset-bottom));
      transform: translateZ(0);
    }
    @supports ((-webkit-backdrop-filter: blur(10px)) or (backdrop-filter: blur(10px))){
      html.fx-on:not(.low-power) .modal-overlay{backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);}
    }
    .modal-overlay.active{opacity:1;visibility:visible}
    .qr-card{
      width:min(420px, 100%);
      background: linear-gradient(180deg, rgba(20,20,20,.92), rgba(12,12,12,.92));
      border:1px solid rgba(197,160,89,.55);
      padding:26px;border-radius:16px;text-align:center;position:relative;
      box-shadow: 0 26px 86px rgba(0,0,0,.65), 0 0 0 1px rgba(197,160,89,.12) inset;
      transform:scale(.92);
      transition:.24s cubic-bezier(.175,.885,.32,1.175);
      overflow:hidden;
      z-index:1200;
      will-change: transform;
      contain: content;
    }
    .qr-card::before{
      content:"";
      position:absolute; inset:-40%;
      background: radial-gradient(circle, rgba(252,234,187,.16), transparent 45%);
      filter: blur(12px);
      opacity:.8;
      pointer-events:none;
    }
    .modal-overlay.active .qr-card{transform:scale(1)}
    .qr-img{width:210px;height:210px;background:#fff;margin:16px auto 12px;padding:10px;border-radius:12px}
    .qr-note{font-size:.85rem;color:#b9b9b9;margin-top:10px;font-family:'Cinzel',serif}
    .close-modal{
      position:absolute;top:10px;right:14px;font-size:1.7rem;color:#7a7a7a;cursor:pointer;
      line-height:1;z-index:2;
    }
    .close-modal:hover{color:var(--red-luck)}
    .hint{font-size:.72rem;color:#7f7f7f;margin-top:8px}

    #loader{
      position:fixed;inset:0;background:#000;z-index:9999;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      transition: .55s;
      padding-top:env(safe-area-inset-top);
      padding-bottom:env(safe-area-inset-bottom);
    }
    .loader-text{
      font-family:'Cinzel',serif;font-size:2rem;color:var(--gold-imperial);
      letter-spacing:3px;animation:pulse 2s infinite;
      text-shadow: 0 12px 40px rgba(0,0,0,.7);
    }
    .loader-btn{
      margin-top:20px;padding:11px 34px;border:1px solid rgba(197,160,89,.9);
      color:var(--gold-imperial);text-transform:uppercase;cursor:pointer;letter-spacing:2px;
      transition:.18s;border-radius:14px;background:transparent;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
    }
    .loader-btn:hover{background:var(--gold-imperial);color:#000}

    /* ANIMS */
    @keyframes rotateDrum{100%{transform:rotate(360deg)}}
    @keyframes marquee{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-50%,0,0)}}
    @keyframes pulse{50%{opacity:.5}}
    @keyframes auraMove{
      0%,100%{transform: translate3d(0,0,0) scale(1)}
      50%{transform: translate3d(-1.2%, 1.0%, 0) scale(1.04)}
    }
    @keyframes haloPulse{
      0%,100%{transform: scale(1); opacity:.55}
      50%{transform: scale(1.10); opacity:.82}
    }
    @keyframes beamsRotate{
      0%{transform: rotate(0deg) scale(1)}
      100%{transform: rotate(360deg) scale(1)}
    }
    @keyframes grainMove{
      0%{background-position: 0 0}
      100%{background-position: 140px 200px}
    }

    .fade-in{
      opacity:0;
      transform: translate3d(0,16px,0);
      transition: opacity .45s ease, transform .45s ease;
      transition-delay: var(--d, 0ms);
      will-change: opacity, transform;
    }
    .fade-in.visible{opacity:1;transform:translate3d(0,0,0)}
  </style>
</head>

<body>
  <!-- BACKGROUND LAYERS (b·∫≠t sau khi Truy c·∫≠p) -->
  <div class="aura"></div>
  <div class="beams"></div>
  <div class="dong-son-bg"></div>
  <canvas id="dragon-canvas"></canvas>
  <div class="grain"></div>
  <div class="vignette"></div>

  <div id="loader">
    <div class="loader-text">VIETNAM TRADING</div>
    <div class="loader-btn" onclick="startExperience()">Truy c·∫≠p</div>
  </div>

  <!-- MARKET TICKER (REALTIME) -->
  <div class="market-ticker" aria-label="Market ticker">
    <div class="ticker-track" id="tickerTrack">
      <div class="ticker-item"><strong>BTC/USD:</strong> <span id="btcPrice" class="ticker-muted">--</span> <span class="dot">‚Ä¢</span> <span id="btcChg" class="ticker-muted">--</span></div>
      <div class="ticker-item"><strong>ETH/USD:</strong> <span id="ethPrice" class="ticker-muted">--</span> <span class="dot">‚Ä¢</span> <span id="ethChg" class="ticker-muted">--</span></div>
      <div class="ticker-item"><strong>GOLD:</strong> <span id="goldPrice" class="ticker-muted">--</span></div>
      <div class="ticker-item"><strong>VNI:</strong> <span id="vniPrice" class="ticker-muted">--</span></div>
      <div class="ticker-item"><i class="fas fa-dragon"></i> CON R·ªíNG CH√ÅU TI√äN</div>

      <div class="ticker-item"><strong>BTC/USD:</strong> <span class="ticker-muted" data-mirror="btcPrice">--</span> <span class="dot">‚Ä¢</span> <span class="ticker-muted" data-mirror="btcChg">--</span></div>
      <div class="ticker-item"><strong>ETH/USD:</strong> <span class="ticker-muted" data-mirror="ethPrice">--</span> <span class="dot">‚Ä¢</span> <span class="ticker-muted" data-mirror="ethChg">--</span></div>
      <div class="ticker-item"><strong>GOLD:</strong> <span class="ticker-muted" data-mirror="goldPrice">--</span></div>
      <div class="ticker-item"><strong>VNI:</strong> <span class="ticker-muted" data-mirror="vniPrice">--</span></div>
      <div class="ticker-item"><i class="fas fa-dragon"></i> CON R·ªíNG CH√ÅU TI√äN</div>
    </div>
  </div>

  <div class="scroll-wrapper" id="scrollWrap">
    <div class="profile-card">

      <div class="hero-panel fade-in">
        <div class="avatar-row">
          <div class="avatar-box">
            <div class="dragon-halo"></div>
            <div class="drum-ring"></div>
            <img
              src="https://i.postimg.cc/jSmbVpLc/photo-2026-01-31-12-54-15.jpg"
              alt="Avatar"
              class="avatar-img"
              loading="lazy"
              decoding="async"
            >
          </div>
        </div>

        <h1 class="name-title">Trading Insight</h1>
        <div class="sub-title">K√™nh t√≠n hi·ªáu &amp; ph√¢n t√≠ch</div>
        <div class="vietnam-tag">
          <i class="fas fa-star" style="color:#ff0000;font-size:.7rem;"></i>
          Vietnam Trader
          <i class="fas fa-star" style="color:#ff0000;font-size:.7rem;"></i>
        </div>
      </div>

      <div class="section-title fade-in"><span>üìå K√äNH T√çN HI·ªÜU</span></div>

      <a id="linkTelegram" href="https://t.me/Vietradecoin" class="dragon-btn fade-in external-link" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fab fa-telegram"></i></div>
          <div class="btn-text">
            <h3>Telegram VIP</h3>
            <p>Nh·∫≠n t√≠n hi·ªáu &amp; Ph√¢n t√≠ch</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(197,160,89,.25); color: rgba(252,234,187,.95); background: rgba(197,160,89,.06);">JOIN</span>
          <i class="fas fa-chevron-right"></i>
        </div>
      </a>

      <a id="linkFacebook" href="https://www.facebook.com/profile.php?id=61585422886098" class="dragon-btn fade-in external-link" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fab fa-facebook-f"></i></div>
          <div class="btn-text">
            <h3>Facebook Group</h3>
            <p>C·ªông ƒë·ªìng ƒë·∫ßu t∆∞ gi√° tr·ªã</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(197,160,89,.25); color: rgba(252,234,187,.95); background: rgba(197,160,89,.06);">OPEN</span>
          <i class="fas fa-chevron-right"></i>
        </div>
      </a>

      <div class="section-title fade-in"><span>üî• M·∫†NG X√É H·ªòI</span></div>

      <a id="linkTikTok" href="https://www.tiktok.com/@tradinginsightpro" class="dragon-btn fade-in external-link" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fab fa-tiktok"></i></div>
          <div class="btn-text">
            <h3>TikTok</h3>
            <p>Video &amp; n·ªôi dung m·ªói ng√†y</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(197,160,89,.25); color: rgba(252,234,187,.95); background: rgba(197,160,89,.06);">FOLLOW</span>
          <i class="fas fa-arrow-up-right-from-square"></i>
        </div>
      </a>

      <a id="linkX" href="https://x.com/kailennox_" class="dragon-btn fade-in external-link" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fa-brands fa-x-twitter"></i></div>
          <div class="btn-text">
            <h3>X</h3>
            <p>Update tin t·ª©c &amp; Insight</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(197,160,89,.25); color: rgba(252,234,187,.95); background: rgba(197,160,89,.06);">OPEN</span>
          <i class="fas fa-arrow-up-right-from-square"></i>
        </div>
      </a>

      <a id="linkThreads" href="https://www.threads.com/@phat.203" class="dragon-btn fade-in external-link" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fa-brands fa-threads"></i></div>
          <div class="btn-text">
            <h3>Threads</h3>
            <p>B√†i vi·∫øt &amp; th·∫£o lu·∫≠n c·ªông ƒë·ªìng</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(197,160,89,.25); color: rgba(252,234,187,.95); background: rgba(197,160,89,.06);">OPEN</span>
          <i class="fas fa-arrow-up-right-from-square"></i>
        </div>
      </a>

      <div class="section-title fade-in"><span>üíé K·∫æT N·ªêI T√ÄI CH√çNH</span></div>

      <div class="dragon-btn bank-btn fade-in" onclick="openQR()" role="button" aria-label="M·ªü QR MB Bank">
        <div class="btn-content">
          <div class="btn-icon"><i class="fas fa-qrcode"></i></div>
          <div class="btn-text">
            <h3>MB Bank</h3>
            <p>Qu√©t QR nhanh ‚Ä¢ Copy STK</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip">SCAN</span>
          <i class="fas fa-expand"></i>
        </div>
      </div>

      <a id="linkContact" href="https://t.me/thanhphatbnb" class="dragon-btn fade-in external-link" style="border-color: rgba(255,255,255,.14);" target="_blank" rel="noopener noreferrer">
        <div class="btn-content">
          <div class="btn-icon"><i class="fas fa-envelope"></i></div>
          <div class="btn-text">
            <h3>Li√™n h·ªá h·ª£p t√°c</h3>
            <p>Booking &amp; Ads</p>
          </div>
        </div>
        <div class="btn-right">
          <span class="bank-chip" style="border-color: rgba(255,255,255,.14); color:#d0d0d0; background: rgba(255,255,255,.04);">CHAT</span>
          <i class="fas fa-arrow-up-right-from-square"></i>
        </div>
      </a>

      <div class="footer fade-in">
        TRADING INSIGHT
        <div class="sig"><i class="fas fa-dragon"></i> CON R·ªíNG CH√ÅU TI√äN</div>
      </div>

    </div>
  </div>

  <!-- QR MODAL -->
  <div class="modal-overlay" id="qrModal" aria-hidden="true">
    <div class="qr-card" role="dialog" aria-modal="true" aria-label="QR MB Bank">
      <div class="close-modal" onclick="closeQR()" aria-label="ƒê√≥ng">&times;</div>
      <h3 style="color:var(--gold-imperial); font-family:'Cinzel'; margin-bottom:6px; position:relative; z-index:2;">MB BANK</h3>
      <p style="color:#9a9a9a; font-size:.85rem; position:relative; z-index:2;">Qu√©t QR ƒë·ªÉ chuy·ªÉn kho·∫£n</p>

      <img id="qrImg"
           src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=0000123456789"
           class="qr-img" alt="QR Code" loading="lazy" decoding="async" style="position:relative; z-index:2;">

      <div class="qr-note" onclick="copySTK()" style="cursor:pointer; position:relative; z-index:2;">
        STK: <span id="stkText">1467899999</span> <i class="far fa-copy"></i>
      </div>
      <div class="hint" style="position:relative; z-index:2;">Ch·∫°m ƒë·ªÉ copy ‚Ä¢ ESC ƒë·ªÉ ƒë√≥ng</div>
    </div>
  </div>

  <audio id="bg-music" loop preload="none">
    <source src="https://files.catbox.moe/jtpjsm.mp3" type="audio/mpeg">
  </audio>

  <script>
    const SETTINGS = {
      links: {
        telegram: "https://t.me/Vietradecoin",
        facebook: "https://www.facebook.com/profile.php?id=61585422886098",
        tiktok: "https://www.tiktok.com/@tradinginsightpro",
        x: "https://x.com/kailennox_",
        threads: "https://www.threads.com/@phat.203",
        contact: "https://t.me/thanhphatbnb",
      },
      vniManual: 1280,
      goldManual: 2450,
      refreshMs: 15000,
      enableGoldRealtime: true,

      performance: {
        fpsMobile: 26,
        fpsDesktop: 45,
        mobileRenderScale: 0.80,
        desktopRenderScale: 1.0,
        maxDprMobile: 1.0,
        maxDprDesktop: 1.5,
        particlesDesktop: 66,
        sparksDesktop: 22,
        particlesMobile: 30,
        sparksMobile: 9,

        // auto low-power n·∫øu FPS th·∫•p h∆°n ng∆∞·ª°ng
        autoLowPower: true,
        fpsFloor: 22,          // d∆∞·ªõi m·ª©c n√†y -> b·∫≠t low-power
        fpsProbeMs: 1200       // ƒëo fps ~1.2s sau khi start
      }
    };

    /* =========================
       PERF DETECT (INIT)
       ========================= */
    const PERF = (() => {
      const reducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const mobile = (window.matchMedia && window.matchMedia('(pointer: coarse)').matches) ||
                     /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      const mem = navigator.deviceMemory || 8;
      const cores = navigator.hardwareConcurrency || 8;
      const lowPower = reducedMotion || (mobile && (mem <= 4 || cores <= 4));
      document.documentElement.classList.toggle('low-power', lowPower);
      return { reducedMotion, mobile, lowPower, mem, cores };
    })();

    (function applyLinks(){
      const map = {
        linkTelegram: SETTINGS.links.telegram,
        linkFacebook: SETTINGS.links.facebook,
        linkTikTok: SETTINGS.links.tiktok,
        linkX: SETTINGS.links.x,
        linkThreads: SETTINGS.links.threads,
        linkContact: SETTINGS.links.contact
      };
      Object.keys(map).forEach(id => {
        const el = document.getElementById(id);
        if (el) el.href = map[id];
      });
    })();

    /* Fade-in: IntersectionObserver */
    const fadeEls = Array.from(document.querySelectorAll('.fade-in'));
    fadeEls.forEach((el, i) => el.style.setProperty('--d', `${i * 60}ms`));
    const io = ('IntersectionObserver' in window)
      ? new IntersectionObserver(entries => {
          entries.forEach(e => {
            if (e.isIntersecting) {
              e.target.classList.add('visible');
              io.unobserve(e.target);
            }
          });
        }, { threshold: 0.12 })
      : null;
    if (io) fadeEls.forEach(el => io.observe(el));

    /* =========================
       EXPERIENCE START (DEFER FX)
       ========================= */
    let tickerTimer = null;
    let tickerAbort = null;

    function startExperience() {
      document.documentElement.classList.add('fx-on'); // b·∫≠t background layers sau click

      const loader = document.getElementById('loader');
      loader.style.opacity = '0';
      setTimeout(() => loader.style.display = 'none', 520);

      const music = document.getElementById('bg-music');
      music.volume = 0.4;
      music.play().catch(() => {});

      if (!io) fadeEls.forEach(el => el.classList.add('visible'));

      // Ch·∫°y ticker tr∆∞·ªõc (nh·∫π), canvas s·∫Ω ch·∫°y sau 1 nh·ªãp rAF ƒë·ªÉ tr√°nh gi·∫≠t l√∫c m·ªü
      startRealtimeTicker();

      requestAnimationFrame(() => {
        if (!PERF.reducedMotion) startCanvasFx();
        if (SETTINGS.performance.autoLowPower) probeFpsAndAutoLowPower();
      });
    }

    /* =========================
       QR MODAL
       ========================= */
    function openQR() {
      const m = document.getElementById('qrModal');
      m.classList.add('active');
      m.setAttribute('aria-hidden', 'false');
      document.getElementById('scrollWrap').style.overflow = 'hidden';
    }
    function closeQR() {
      const m = document.getElementById('qrModal');
      m.classList.remove('active');
      m.setAttribute('aria-hidden', 'true');
      document.getElementById('scrollWrap').style.overflow = 'auto';
    }
    document.getElementById('qrModal').addEventListener('click', function(e) {
      if (e.target === this) closeQR();
    }, { passive:true });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeQR();
    });

    function copySTK() {
      const stk = document.getElementById("stkText").textContent.trim();
      if (!navigator.clipboard) {
        const ta = document.createElement("textarea");
        ta.value = stk;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        alert("ƒê√£ sao ch√©p s·ªë t√†i kho·∫£n!");
        return;
      }
      navigator.clipboard.writeText(stk).then(() => alert("ƒê√£ sao ch√©p s·ªë t√†i kho·∫£n!"))
        .catch(() => alert("Kh√¥ng th·ªÉ sao ch√©p. Vui l√≤ng copy th·ªß c√¥ng."));
    }

    /* =========================
       TICKER (LESS JANK)
       - d√πng setTimeout chain (kh√¥ng d·ªìn queue nh∆∞ setInterval)
       - pause khi tab ·∫©n
       ========================= */
    function fmtUSD(n){
      if (typeof n !== "number" || !isFinite(n)) return "--";
      return n.toLocaleString("en-US", { style: "currency", currency: "USD", maximumFractionDigits: 0 });
    }
    function fmtPct(n){
      if (typeof n !== "number" || !isFinite(n)) return "--";
      const sign = n > 0 ? "+" : "";
      return `${sign}${n.toFixed(2)}%`;
    }
    function setText(id, text){
      const el = document.getElementById(id);
      if (el) el.textContent = text;
      document.querySelectorAll(`[data-mirror="${id}"]`).forEach(m => m.textContent = text);
    }
    function setClass(id, cls){
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.remove("ticker-up","ticker-down","ticker-muted");
      el.classList.add(cls);
      document.querySelectorAll(`[data-mirror="${id}"]`).forEach(m => {
        m.classList.remove("ticker-up","ticker-down","ticker-muted");
        m.classList.add(cls);
      });
    }

    async function fetchWithTimeout(url, ms=8000){
      if (tickerAbort) tickerAbort.abort();
      tickerAbort = new AbortController();
      const t = setTimeout(() => tickerAbort.abort(), ms);
      try{
        const res = await fetch(url, { signal: tickerAbort.signal, cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        return await res.json();
      } finally { clearTimeout(t); }
    }

    async function updateCrypto(){
      const url = "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true";
      const data = await fetchWithTimeout(url, 8000);

      const btc = data?.bitcoin?.usd;
      const btcChg = data?.bitcoin?.usd_24h_change;
      const eth = data?.ethereum?.usd;
      const ethChg = data?.ethereum?.usd_24h_change;

      if (typeof btc === "number") setText("btcPrice", fmtUSD(btc));
      if (typeof btcChg === "number"){
        setText("btcChg", fmtPct(btcChg));
        const c = btcChg >= 0 ? "ticker-up" : "ticker-down";
        setClass("btcPrice", c);
        setClass("btcChg", c);
      }

      if (typeof eth === "number") setText("ethPrice", fmtUSD(eth));
      if (typeof ethChg === "number"){
        setText("ethChg", fmtPct(ethChg));
        const c = ethChg >= 0 ? "ticker-up" : "ticker-down";
        setClass("ethPrice", c);
        setClass("ethChg", c);
      }
    }

    async function updateGold(){
      if (!SETTINGS.enableGoldRealtime){
        setText("goldPrice", SETTINGS.goldManual.toLocaleString("en-US") + "$");
        setClass("goldPrice", "ticker-up");
        return;
      }
      try{
        const url = "https://api.metals.live/v1/spot/gold";
        const data = await fetchWithTimeout(url, 8000);
        const last = Array.isArray(data) ? data[data.length - 1] : null;
        const price = Array.isArray(last) ? last[1] : null;
        if (typeof price === "number" && isFinite(price)){
          setText("goldPrice", price.toLocaleString("en-US") + "$");
          setClass("goldPrice", "ticker-up");
          return;
        }
        throw new Error("Bad gold data");
      } catch(e){
        setText("goldPrice", SETTINGS.goldManual.toLocaleString("en-US") + "$");
        setClass("goldPrice", "ticker-muted");
      }
    }

    function updateVNI(){
      setText("vniPrice", Number(SETTINGS.vniManual).toLocaleString("en-US"));
      setClass("vniPrice", "ticker-up");
    }

    async function updateAll(){
      if (document.hidden) return; // pause khi tab ·∫©n
      try { await updateCrypto(); }
      catch(e){
        setText("btcPrice","--"); setText("btcChg","--"); setClass("btcPrice","ticker-muted"); setClass("btcChg","ticker-muted");
        setText("ethPrice","--"); setText("ethChg","--"); setClass("ethPrice","ticker-muted"); setClass("ethChg","ticker-muted");
      }
      await updateGold();
      updateVNI();
    }

    function stopRealtimeTicker(){
      if (tickerTimer) { clearTimeout(tickerTimer); tickerTimer = null; }
      if (tickerAbort) { tickerAbort.abort(); tickerAbort = null; }
    }

    function startRealtimeTicker(){
      stopRealtimeTicker();
      updateVNI();
      setText("goldPrice", SETTINGS.goldManual.toLocaleString("en-US") + "$");
      setClass("goldPrice", "ticker-muted");

      const loop = async () => {
        await updateAll();
        tickerTimer = setTimeout(loop, SETTINGS.refreshMs);
      };
      loop();
    }

    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && document.documentElement.classList.contains('fx-on')) updateAll();
    });

    /************************************************************
     * CANVAS PARTICLES (FIX + OPTIMIZED)
     * - clear theo pixel th·∫≠t (canvas.width/height)
     * - cap DPR, scale mobile
     * - pause khi scroll mobile
     ************************************************************/
    const canvas = document.getElementById('dragon-canvas');
    const ctx = canvas.getContext('2d', { alpha: true, desynchronized: true });

    let cssW=0, cssH=0, running=false;
    let time = 0;
    let lastFrameTs = 0;
    let targetFrameMs = 1000 / (PERF.mobile ? SETTINGS.performance.fpsMobile : SETTINGS.performance.fpsDesktop);

    let scaleFactor = 1;
    let isScrolling = false;
    let scrollTimer = null;

    const scrollWrap = document.getElementById('scrollWrap');
    scrollWrap.addEventListener('scroll', () => {
      if (!PERF.mobile) return;
      isScrolling = true;
      clearTimeout(scrollTimer);
      scrollTimer = setTimeout(() => { isScrolling = false; }, 140);
    }, { passive: true });

    function setupCanvasSize(){
      cssW = window.innerWidth;
      cssH = window.innerHeight;

      const maxDpr = PERF.mobile ? SETTINGS.performance.maxDprMobile : SETTINGS.performance.maxDprDesktop;
      const scale = PERF.mobile ? SETTINGS.performance.mobileRenderScale : SETTINGS.performance.desktopRenderScale;
      const dpr = Math.min(window.devicePixelRatio || 1, maxDpr);

      scaleFactor = dpr * scale;

      canvas.style.width = cssW + "px";
      canvas.style.height = cssH + "px";

      canvas.width = Math.floor(cssW * scaleFactor);
      canvas.height = Math.floor(cssH * scaleFactor);

      ctx.setTransform(scaleFactor, 0, 0, scaleFactor, 0, 0);
    }

    window.addEventListener('resize', () => { if (running) setupCanvasSize(); }, { passive:true });

    const particles = [];
    const sparks = [];

    class Particle{
      constructor(){ this.reset(true); }
      reset(first=false){
        this.x = Math.random() * cssW;
        this.y = first ? Math.random()*cssH : cssH + Math.random()*120;
        this.size = Math.random() * 1.8 + 0.4;
        this.offset = Math.random() * 100;
        this.speed = Math.random() * 0.46 + 0.12;
        this.alpha = Math.random() * 0.40 + 0.10;
      }
      update(){
        this.y -= this.speed;
        this.x += Math.sin((this.y * 0.010) + time + this.offset) * 0.45;
        if (this.y < -20) this.reset(false);
      }
      draw(){
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fill();
      }
    }

    class Spark{
      constructor(){ this.reset(true); }
      reset(first=false){
        this.x = Math.random()*cssW;
        this.y = first ? Math.random()*cssH : cssH + Math.random()*200;
        this.vx = (Math.random()-0.5)*0.26;
        this.vy = -(Math.random()*0.78 + 0.52);
        this.life = Math.random()*70 + 52;
        this.maxLife = this.life;
        this.w = Math.random()*1.4 + 0.6;
      }
      update(){
        this.x += this.vx;
        this.y += this.vy;
        this.life -= 1;
        if (this.life <= 0 || this.y < -40) this.reset(false);
      }
      draw(){
        const t = this.life / this.maxLife;
        ctx.globalAlpha = Math.max(0, Math.min(1, t)) * 0.30;
        ctx.lineWidth = this.w;
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x - this.vx*10, this.y - this.vy*10);
        ctx.stroke();
      }
    }

    function buildFx(){
      particles.length = 0;
      sparks.length = 0;

      const pCount = PERF.mobile ? SETTINGS.performance.particlesMobile : SETTINGS.performance.particlesDesktop;
      const sCount = PERF.mobile ? SETTINGS.performance.sparksMobile : SETTINGS.performance.sparksDesktop;

      for (let i=0;i<pCount;i++) particles.push(new Particle());
      for (let i=0;i<sCount;i++) sparks.push(new Spark());
    }

    function startCanvasFx(){
      // n·∫øu low-power th√¨ b·ªè canvas lu√¥n cho m∆∞·ª£t
      if (document.documentElement.classList.contains('low-power')) return;

      setupCanvasSize();
      buildFx();

      running = true;
      lastFrameTs = 0;

      ctx.fillStyle = "rgba(197,160,89,1)";
      ctx.strokeStyle = "rgba(252,234,187,1)";

      requestAnimationFrame(tick);
    }

    function stopCanvasFx(){
      running = false;
      // clear theo pixel th·∫≠t
      ctx.setTransform(1,0,0,1,0,0);
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.setTransform(scaleFactor,0,0,scaleFactor,0,0);
    }

    function clearCanvasFast(withTrail){
      // clear theo pixel th·∫≠t
      ctx.setTransform(1,0,0,1,0,0);
      ctx.clearRect(0,0,canvas.width,canvas.height);

      if (withTrail){
        ctx.globalAlpha = 0.16;
        ctx.fillStyle = "rgba(0,0,0,1)";
        ctx.fillRect(0,0,canvas.width,canvas.height);
      }

      // restore transform v·ªÅ CSS space
      ctx.setTransform(scaleFactor,0,0,scaleFactor,0,0);
      ctx.globalAlpha = 1;
      ctx.fillStyle = "rgba(197,160,89,1)";
    }

    function tick(ts){
      if (!running) return;

      if (document.hidden) { requestAnimationFrame(tick); return; }
      if (PERF.mobile && isScrolling) { requestAnimationFrame(tick); return; }

      if (ts - lastFrameTs < targetFrameMs) { requestAnimationFrame(tick); return; }
      lastFrameTs = ts;

      time += 0.010;

      const withTrail = !PERF.lowPower;
      clearCanvasFast(withTrail);

      for (let i=0;i<particles.length;i++){
        const p = particles[i];
        p.update();
        p.draw();
      }

      ctx.strokeStyle = "rgba(252,234,187,1)";
      for (let i=0;i<sparks.length;i++){
        const s = sparks[i];
        s.update();
        s.draw();
      }

      ctx.globalAlpha = 1;
      requestAnimationFrame(tick);
    }

    /* =========================
       AUTO LOW-POWER by FPS
       ========================= */
    function probeFpsAndAutoLowPower(){
      if (document.documentElement.classList.contains('low-power')) return;
      if (!running) return;

      let frames = 0;
      const start = performance.now();

      function count(){
        if (!running) return;
        frames++;
        const now = performance.now();
        if (now - start >= SETTINGS.performance.fpsProbeMs){
          const fps = frames * 1000 / (now - start);
          if (fps < SETTINGS.performance.fpsFloor){
            document.documentElement.classList.add('low-power');
            stopCanvasFx(); // t·∫Øt canvas l√† m∆∞·ª£t li·ªÅn
          }
          return;
        }
        requestAnimationFrame(count);
      }
      requestAnimationFrame(count);
    }

  </script>
</body>
</html>
